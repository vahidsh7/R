---
import type { Lang } from '@/utils/i18n';
import { t } from '@/utils/translations';
import { NAV_ITEMS } from '@/utils/navItems';
import { getRelativeLocaleUrl } from 'astro:i18n';

interface Props {
  lang?: Lang;
  class?: string;
}
const { lang, class: className } = Astro.props as Props;
const resolvedLang = ((Astro.currentLocale as Lang | undefined) ??
  (lang as Lang | undefined) ??
  'zh') as Lang;
---

<div class={`md:col-span-2 grid grid-cols-2 sm:grid-cols-4 gap-6 ${className ?? ''}`.trim()}>
  {
    NAV_ITEMS.map((item) => (
      <div>
        <h3 class="mb-2 text-sm font-medium text-neutral-900 dark:text-neutral-100">
          <a
            href={getRelativeLocaleUrl(resolvedLang, `/category/${item.key}`)}
            class="-ml-2 rounded-md px-2 py-1 transition-all hover:bg-black/10 hover:text-black focus:no-underline dark:hover:bg-white/10 dark:hover:text-white"
          >
            {t(resolvedLang, `navigation.${item.key}`)}
          </a>
        </h3>
        <ul class="space-y-1">
          {item.tags.map((tag) => (
            <li>
              <a
                href={getRelativeLocaleUrl(resolvedLang, `/tags/${tag}`)}
                class="-ml-2 block w-fit rounded-md px-2 py-0.5 text-sm text-neutral-600 transition-all hover:bg-black/10 hover:text-black dark:text-neutral-400 dark:hover:bg-white/10 dark:hover:text-white"
              >
                {t(resolvedLang, `tags.${tag}`)}
              </a>
            </li>
          ))}
        </ul>
      </div>
    ))
  }

  <div>
    <h3 class="mb-2 text-sm font-medium text-neutral-900 dark:text-neutral-100">
      {t(resolvedLang, 'footer.more')}
    </h3>
    <ul class="space-y-1">
      <li>
        <a
          href={getRelativeLocaleUrl(resolvedLang, '/category')}
          class="-ml-2 block w-fit rounded-md px-2 py-0.5 text-sm text-neutral-600 transition-all hover:bg-black/5 hover:text-black dark:text-neutral-400 dark:hover:bg-white/10 dark:hover:text-white"
        >
          {t(resolvedLang, 'footer.categories')}
        </a>
      </li>
      <li>
        <a
          href={getRelativeLocaleUrl(resolvedLang, '/tags')}
          class="-ml-2 block w-fit rounded-md px-2 py-0.5 text-sm text-neutral-600 transition-all hover:bg-black/5 hover:text-black dark:text-neutral-400 dark:hover:bg-white/10 dark:hover:text-white"
        >
          {t(resolvedLang, 'footer.tags')}
        </a>
      </li>
      <li>
        <a
          href={getRelativeLocaleUrl(resolvedLang, '/author')}
          class="-ml-2 block w-fit rounded-md px-2 py-0.5 text-sm text-neutral-600 transition-all hover:bg-black/5 hover:text-black dark:text-neutral-400 dark:hover:bg-white/10 dark:hover:text-white"
        >
          {t(resolvedLang, 'footer.author')}
        </a>
      </li>
    </ul>
  </div>
</div>
